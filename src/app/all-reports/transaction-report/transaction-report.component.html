<div class="wrapper">
  <app-toast></app-toast>
  <div class="header">
    <h1>Transaction Report</h1>
  </div>
  <div *ngIf="fetching">
    <h2 data-content="Loading...">Loading...</h2>
  </div>
  <div *ngIf="reports && reports.length && (!fetching)">


    <form>
      <!-- query -->
      <label for="filter" class="search-filter ml-4">
        <input type="date" id="filter" placeholder="&nbsp;" />
        <span class="label">Show report from</span>
        <span class="border"></span>
      </label>
      <label for="filter" class="search-filter ml-4">
        <input type="date" id="filter" placeholder="&nbsp;" />
        <span class="label">Show report to</span>
        <span class="border"></span>
      </label>

      <button class="main ml-4">Show Report</button>

    </form>
    <label for="filter" class="search-filter mt-4">
      <input type="text" id="filter" placeholder="&nbsp;" [(ngModel)]="searchText" name="searchText"
        (keyup)="applyFilter($event.target.value)" />
      <span class="label">Search </span>
      <span class="border"></span>
    </label>
    <table cellspacing="0" class="container-fluid">
      <thead>
        <tr>
          <th>arn</th>
          <th>amount</th>
          <th>fee</th>
          <th>channel</th>
          <th>Bank</th>
          <th> Branch</th>
          <th>Extra Detail</th>
          <th>date</th>
          <th>merchant ID</th>
          <th>terminal ID</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of reports | filter: searchText | paginate: config">
          <td>{{report.arn}}</td>
          <td>{{report.amount}}</td>
          <td>{{report.fee}}</td>
          <td>{{report.paymentChannel}}</td>
          <td>{{report.paymentBank}}</td>
          <td>{{report.paymentBankBranch}}</td>
          <td>{{report.extraDetail}}</td>
          <td>{{report.dateCreated | date:'dd-MM-yyyy'}}</td>
          <td>{{report.merchantID}}</td>
          <td>{{report.terminalID}}</td>

        </tr>
      </tbody>
    </table>
    <select [(ngModel)]="config.itemsPerPage" class="form-control mb-4 d-inline-block w-auto float-right">
      <option>2</option>
      <option *ngFor="let limit of [5, 10, 20, 30, 40, 50]">{{limit}}</option>
    </select>
    <pagination-controls (pageChange)="pageChanged($event)" responsive="true" screenReaderPaginationLabel="Pagination"
      screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page" class="my-pagination">
    </pagination-controls>

<div class="container">
  <h2><strong style="font-weight:bold">TRANSACTION SUMMARY REPORT </strong> <small *ngIf="startDate && endDate"> {{startDate}} to {{endDate}}</small></h2>
  <div style="display:flex; justify-content: center" class="mb-4">
    <input type="date" class="mr-3" [(ngModel)]="startDate">
    <input type="date" class="mr-3" [(ngModel)]="endDate">
    <button class="btn btn-outline-primary" (click)="filterByDate()">Show</button>

  </div>
  <ul class="responsive-table">
    <li class="table-header">
      <div class="col col-1">S/N</div>
      <div class="col col-5">Type</div>
      <div class="col col-2">Number Generated</div>
      <div class="col col-2">Total AMount</div>
    </li>
    <li class="table-row" *ngFor="let transaction of transactionSummary; index as i">
      <div class="col col-1" data-label="Job Id">{{i+1}}</div>
      <div class="col col-5" data-label="Customer Name">{{transaction.documentName}}</div>
      <div class="col col-2" data-label="Amount">{{transaction.quantity}}</div>
      <div class="col col-2" data-label="Payment Status">â‚¦{{transaction.totalAmount}}</div>
    </li>
  </ul>
</div>
